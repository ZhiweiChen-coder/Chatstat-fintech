!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("lodash"));else if("function"==typeof define&&define.amd)define(["lodash"],e);else{var r="object"==typeof exports?e(require("lodash")):e(t._);for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(this,(t=>(()=>{"use strict";var e={7607:e=>{e.exports=t}},r={};function n(t){var o=r[t];if(void 0!==o)return o.exports;var i=r[t]={exports:{}};return e[t](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};return(()=>{n.r(o),n.d(o,{MacGyver:()=>nt});var t=n(7607),e=n.n(t),r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var u=function(t){var e="[object "+t+"]";return function(t){return s(t)===e}},s=function(t){return Object.prototype.toString.call(t)},a=function(t){return t instanceof Date?t.getTime():p(t)?t.map(a):t&&"function"==typeof t.toJSON?t.toJSON():t},p=u("Array"),c=u("Object"),f=u("Function"),l=function(t,e){if(null==t&&t==e)return!0;if(t===e)return!0;if(Object.prototype.toString.call(t)!==Object.prototype.toString.call(e))return!1;if(p(t)){if(t.length!==e.length)return!1;for(var r=0,n=t.length;r<n;r++)if(!l(t[r],e[r]))return!1;return!0}if(c(t)){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var o in t)if(!l(t[o],e[o]))return!1;return!0}return!1},h=function(t,e,r,n,o,i){var u=e[n];if(p(t)&&isNaN(Number(u)))for(var s=0,a=t.length;s<a;s++)if(!h(t[s],e,r,n,s,t))return!1;return n===e.length||null==t?r(t,o,i,0===n):h(t[u],e,r,n+1,u,t)},y=function(){function t(t,e,r,n){this.params=t,this.owneryQuery=e,this.options=r,this.name=n,this.init()}return t.prototype.init=function(){},t.prototype.reset=function(){this.done=!1,this.keep=!1},t}(),d=function(t){function e(e,r,n,o){var i=t.call(this,e,r,n)||this;return i.children=o,i}return i(e,t),e.prototype.reset=function(){this.keep=!1,this.done=!1;for(var t=0,e=this.children.length;t<e;t++)this.children[t].reset()},e.prototype.childrenNext=function(t,e,r,n){for(var o=!0,i=!0,u=0,s=this.children.length;u<s;u++){var a=this.children[u];if(a.done||a.next(t,e,r,n),a.keep||(i=!1),a.done){if(!a.keep)break}else o=!1}this.done=o,this.keep=i},e}(y),g=function(t){function e(e,r,n,o,i){var u=t.call(this,e,r,n,o)||this;return u.name=i,u}return i(e,t),e}(d),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propop=!0,e}return i(e,t),e.prototype.next=function(t,e,r,n){this.childrenNext(t,e,r,n)},e}(d),w=function(t){function e(e,r,n,o,i){var u=t.call(this,r,n,o,i)||this;return u.keyPath=e,u.propop=!0,u._nextNestedValue=function(t,e,r,n){return u.childrenNext(t,e,r,n),!u.done},u}return i(e,t),e.prototype.next=function(t,e,r){h(t,this.keyPath,this._nextNestedValue,0,e,r)},e}(d),v=function(t,e){if(t instanceof Function)return t;if(t instanceof RegExp)return function(e){var r="string"==typeof e&&t.test(e);return t.lastIndex=0,r};var r=a(t);return function(t){return e(r,a(t))}},b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propop=!0,e}return i(e,t),e.prototype.init=function(){this._test=v(this.params,this.options.compare)},e.prototype.next=function(t,e,r){Array.isArray(r)&&!r.hasOwnProperty(e)||this._test(t,e,r)&&(this.done=!0,this.keep=!0)},e}(y),$=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propop=!0,e}return i(e,t),e.prototype.next=function(){this.done=!0,this.keep=!1},e}(y),x=function(t){return e=function(e,r,n,o){var i=typeof a(e),u=t(e);return new b((function(t){return typeof a(t)===i&&u(t)}),r,n,o)},function(t,r,n,o){return null==t?new $(t,r,n,o):e(t,r,n,o)};var e},j=function(t,e,r,n){var o=n.operations[t];return o||O(t),o(e,r,n,t)},O=function(t){throw new Error("Unsupported operation: "+t)},S=function(t,e){for(var r in t)if(e.operations.hasOwnProperty(r)||"$"===r.charAt(0))return!0;return!1},P=function(t,e,r,n,o){if(S(e,o)){var i=k(e,r,o),u=i[0];if(i[1].length)throw new Error("Property queries must contain only operations, or exact objects.");return new w(t,e,n,o,u)}return new w(t,e,n,o,[new b(e,n,o)])},E=function(t,e,r){void 0===e&&(e=null);var n=void 0===r?{}:r,o=n.compare,i=n.operations,u={compare:o||l,operations:Object.assign({},i||{})},s=k(t,null,u),a=s[0],p=s[1],c=[];return a.length&&c.push(new w([],t,e,u,a)),c.push.apply(c,p),1===c.length?c[0]:new m(t,e,u,c)},k=function(t,e,r){var n,o=[],i=[];if(!(n=t)||n.constructor!==Object&&n.constructor!==Array&&"function Object() { [native code] }"!==n.constructor.toString()&&"function Array() { [native code] }"!==n.constructor.toString()||n.toJSON)return o.push(new b(t,t,r)),[o,i];for(var u in t)if(r.operations.hasOwnProperty(u)){var s=j(u,t[u],t,r);if(s&&!s.propop&&e&&!r.operations[e])throw new Error("Malformed query. "+u+" cannot be matched against property.");null!=s&&o.push(s)}else"$"===u.charAt(0)?O(u):i.push(P(u.split("."),t[u],u,t,r));return[o,i]},_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propop=!0,e}return i(e,t),e.prototype.init=function(){this._test=v(this.params,this.options.compare)},e.prototype.reset=function(){t.prototype.reset.call(this),this.keep=!0},e.prototype.next=function(t){this._test(t)&&(this.done=!0,this.keep=!1)},e}(y),A=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propop=!0,e}return i(e,t),e.prototype.init=function(){if(!this.params||"object"!=typeof this.params)throw new Error("Malformed query. $elemMatch must by an object.");this._queryOperation=E(this.params,this.owneryQuery,this.options)},e.prototype.reset=function(){t.prototype.reset.call(this),this._queryOperation.reset()},e.prototype.next=function(t){if(p(t)){for(var e=0,r=t.length;e<r;e++){this._queryOperation.reset();var n=t[e];this._queryOperation.next(n,e,t,!1),this.keep=this.keep||this._queryOperation.keep}this.done=!0}else this.done=!1,this.keep=!1},e}(y),C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propop=!0,e}return i(e,t),e.prototype.init=function(){this._queryOperation=E(this.params,this.owneryQuery,this.options)},e.prototype.reset=function(){t.prototype.reset.call(this),this._queryOperation.reset()},e.prototype.next=function(t,e,r,n){this._queryOperation.next(t,e,r,n),this.done=this._queryOperation.done,this.keep=!this._queryOperation.keep},e}(y),D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propop=!0,e}return i(e,t),e.prototype.init=function(){},e.prototype.next=function(t){p(t)&&t.length===this.params&&(this.done=!0,this.keep=!0)},e}(y),q=function(t){if(0===t.length)throw new Error("$and/$or/$nor must be a nonempty array")},N=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propop=!1,e}return i(e,t),e.prototype.init=function(){var t=this;q(this.params),this._ops=this.params.map((function(e){return E(e,null,t.options)}))},e.prototype.reset=function(){this.done=!1,this.keep=!1;for(var t=0,e=this._ops.length;t<e;t++)this._ops[t].reset()},e.prototype.next=function(t,e,r){for(var n=!1,o=!1,i=0,u=this._ops.length;i<u;i++){var s=this._ops[i];if(s.next(t,e,r),s.keep){n=!0,o=s.keep;break}}this.keep=o,this.done=n},e}(y),I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propop=!1,e}return i(e,t),e.prototype.next=function(e,r,n){t.prototype.next.call(this,e,r,n),this.keep=!this.keep},e}(N),U=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propop=!0,e}return i(e,t),e.prototype.init=function(){var t=this;this._testers=this.params.map((function(e){if(S(e,t.options))throw new Error("cannot nest $ under "+t.name.toLowerCase());return v(e,t.options.compare)}))},e.prototype.next=function(t,e,r){for(var n=!1,o=!1,i=0,u=this._testers.length;i<u;i++)if((0,this._testers[i])(t)){n=!0,o=!0;break}this.keep=o,this.done=n},e}(y),T=function(t){function e(e,r,n,o){var i=t.call(this,e,r,n,o)||this;return i.propop=!0,i._in=new U(e,r,n,o),i}return i(e,t),e.prototype.next=function(t,e,r,n){this._in.next(t,e,r),p(r)&&!n?this._in.keep?(this.keep=!1,this.done=!0):e==r.length-1&&(this.keep=!0,this.done=!0):(this.keep=!this._in.keep,this.done=!0)},e.prototype.reset=function(){t.prototype.reset.call(this),this._in.reset()},e}(y),M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propop=!0,e}return i(e,t),e.prototype.next=function(t,e,r){r.hasOwnProperty(e)===this.params&&(this.done=!0,this.keep=!0)},e}(y),F=function(t){function e(e,r,n,o){var i=t.call(this,e,r,n,e.map((function(t){return E(t,r,n)})),o)||this;return i.propop=!1,q(e),i}return i(e,t),e.prototype.next=function(t,e,r,n){this.childrenNext(t,e,r,n)},e}(g),L=function(t){function e(e,r,n,o){var i=t.call(this,e,r,n,e.map((function(t){return E(t,r,n)})),o)||this;return i.propop=!0,i}return i(e,t),e.prototype.next=function(t,e,r,n){this.childrenNext(t,e,r,n)},e}(g),R=x((function(t){return function(e){return e<t}})),V=x((function(t){return function(e){return e<=t}})),W=x((function(t){return function(e){return e>t}})),J=x((function(t){return function(e){return e>=t}})),z={number:function(t){return"number"==typeof t},string:function(t){return"string"==typeof t},bool:function(t){return"boolean"==typeof t},array:function(t){return Array.isArray(t)},null:function(t){return null===t},timestamp:function(t){return t instanceof Date}},Q=Object.freeze({__proto__:null,$Size:D,$eq:function(t,e,r){return new b(t,e,r)},$ne:function(t,e,r,n){return new _(t,e,r,n)},$or:function(t,e,r,n){return new N(t,e,r,n)},$nor:function(t,e,r,n){return new I(t,e,r,n)},$elemMatch:function(t,e,r,n){return new A(t,e,r,n)},$nin:function(t,e,r,n){return new T(t,e,r,n)},$in:function(t,e,r,n){return new U(t,e,r,n)},$lt:R,$lte:V,$gt:W,$gte:J,$mod:function(t,e,r){var n=t[0],o=t[1];return new b((function(t){return a(t)%n===o}),e,r)},$exists:function(t,e,r,n){return new M(t,e,r,n)},$regex:function(t,e,r){return new b(new RegExp(t,e.$options),e,r)},$not:function(t,e,r,n){return new C(t,e,r,n)},$type:function(t,e,r){return new b((function(e){if("string"==typeof t){if(!z[t])throw new Error("Type alias does not exist");return z[t](e)}return null!=e&&(e instanceof t||e.constructor===t)}),e,r)},$and:function(t,e,r,n){return new F(t,e,r,n)},$all:function(t,e,r,n){return new L(t,e,r,n)},$size:function(t,e,r){return new D(t,e,r,"$size")},$options:function(){return null},$where:function(t,e,r){var n;if(f(t))n=t;else{if(process.env.CSP_ENABLED)throw new Error('In CSP mode, sift does not support strings in "$where" condition');n=new Function("obj","return "+t)}return new b((function(t){return n.bind(t)(t)}),e,r)}});const B=function(t,e){void 0===e&&(e={});var r,n=function(t,e,r){var n=void 0===r?{}:r,o=n.compare,i=n.operations;return E(t,null,{compare:o,operations:Object.assign({},Q,i||{})})}(t,0,e);return r=n,function(t,e,n){return r.reset(),r.next(t,e,n),r.keep}};function G(t){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H(){H=function(t,e){return new r(t,void 0,e)};var t=RegExp.prototype,e=new WeakMap;function r(t,n,o){var i=new RegExp(t,n);return e.set(i,o||e.get(t)),K(i,r.prototype)}function n(t,r){var n=e.get(r);return Object.keys(n).reduce((function(e,r){return e[r]=t[n[r]],e}),Object.create(null))}return X(r,RegExp),r.prototype.exec=function(e){var r=t.exec.call(this,e);return r&&(r.groups=n(r,this)),r},r.prototype[Symbol.replace]=function(r,o){if("string"==typeof o){var i=e.get(this);return t[Symbol.replace].call(this,r,o.replace(/\$<([^>]+)>/g,(function(t,e){return"$"+i[e]})))}if("function"==typeof o){var u=this;return t[Symbol.replace].call(this,r,(function(){var t=arguments;return"object"!=G(t[t.length-1])&&(t=[].slice.call(t)).push(n(t,u)),o.apply(this,t)}))}return t[Symbol.replace].call(this,r,o)},H.apply(this,arguments)}function X(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K(t,e)}function K(t,e){return(K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Z(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function tt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(r),!0).forEach((function(e){et(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function et(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var rt={widgets:{},$nextId:0,nextId:function(){return"mgForm".concat(rt.$nextId++)},forms:{}};rt.forms.setConfig=function(t,e){return rt.$forms[t]||(rt.$forms[t]={config:{},data:{}}),rt.$forms[t].config=rt.compileSpec(e).spec,rt},rt.forms.setData=function(t,e){return rt.$forms[t]||(rt.$forms[t]={config:{},data:{}}),rt.$forms[t].data=e,rt},rt.forms.validate=function(t){if(!rt.$forms[t])throw new Error("Invalid MacGyver form");return console.warn("FIXME: Validation not yet supported"),!0},rt.forms.emit=function(t,e){var r;if(!rt.$forms[t])throw new Error("Unknown form ID");for(var n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];(r=rt.$forms[t]).$emit.apply(r,[e].concat(o))},rt.forms.emitDown=function(t,e){var r;if(!rt.$forms[t])throw new Error("Unknown form ID");for(var n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];(r=rt.$forms[t]).$emitDown.apply(r,[e].concat(o))},rt.forms.getPath=function(t,e,r){return rt.utils.getPath(rt.$forms[t],e,r)},rt.forms.getPrototype=function(t){return rt.flatten(t,{type:"spec",want:"array",wantDataPath:!0}).reduce((function(t,e){return e.path&&e.default?(rt.utils.setPath(t,e.path,e.default),t):t}),{})},rt.notify={},rt.notify.loading=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0;e&&r&&r.foreground?console.log("[$macgyver]","Loading foreground",t,{status:e}):e?console.log("[$macgyver]","Loading background",t,{status:e}):console.log("[$macgyver]","Stop loading",t,{status:e})},rt.notify.warn=function(t){return console.log("[$macgyver]","WARN",t)},rt.notify.error=function(t){return console.log("[$macgyver]",t)},rt.flatten=function(t,r){var n=e().defaults(r,{root:e().isArray(t)?rt.compileSpec(t).spec:t,maxDepth:0,filter:void 0,filterChildren:void 0,type:"auto",want:"object",wantDataPath:!1,wantSpec:!1,wantSpecPath:!1});if(n.filter&&!e().isFunction(n.filter)&&e().isObject(n.filter)&&(n.filter=e().matches(n.filter)),"object"!=n.want&&"array"!=n.want)throw new Error('$macgyver.flatten({want}) can only be "object" or "array"');if("auto"==n.type)if(n.root&&n.root.items)n.type="spec";else{if(!e().every(n.root,(function(t,e){return!e.items})))throw new Error("Cannot determine type of input object to $macgyver.flatten(), specify it explicitly with {type=spec|data}");n.type="data"}var o="object"==n.want?{}:[];return function t(r,i,u,s){if(e().isObject(r)){n.filter&&!n.filter.call(r,r,path,s)||(n.wantDataPath&&(r[e().isString(n.wantDataPath)?n.wantDataPath:"path"]=i.concat([r.id]).filter((function(t){return t})).join(".")),n.wantSpecPath&&(r[e().isString(n.wantSpecPath)?n.wantSpecPath:"specPath"]=u.join(".")),"object"==n.want?r.id&&(o[r.id]=r):o.push(r));var a="spec"==n.type?r.items:r;!e().isArray(a)||n.filterChildren&&!n.filterChildren.call(r,r,i,u,s)||n.maxDepth&&!(s<=n.maxDepth)||a.forEach((function(e,r){return t(e,i,u.concat("spec"==n.type?["items",r]:[r]),s+1)}))}}(n.root,[],[],0),o},rt.compileSpec=function(t,r){var n=tt({clone:!0,convertArray:!0,convertArrayWrapper:function(t){return{type:"mgContainer",showTitles:!1,items:t}},convertShorthand:!0,convertShorthandDetect:function(t){return e().isPlainObject(t)&&!e().has(t,"type")&&e().every(t,(function(t,r){return!(e().has(t,"id")||e().has(t,"type")&&"mgContainer"==t.type)}))},convertShorthandTranslate:function(t){return{type:"mgContainer",items:e().map(t,(function(t,r){var n;if(e().isString(t)&&(t={type:t}),null!==(n=t.type)&&void 0!==n&&n.startsWith("mg"))return t;if(e().isString(r)&&r.startsWith("mg"))return tt(tt({},t),{},{type:r});if(t.type){var o=t.type.toLowerCase(),i=e().find(rt.widgets,(function(t){return t.meta.id.substr(2).toLowerCase()==o||t.meta.shorthand.includes(o)}));return i?tt(tt({id:r},t),{},{type:i.meta.id}):{type:"mgError",text:'Unknown widget type "'.concat(t.type,'": ')+JSON.stringify(t,null,"\t")}}return e().isPlainObject(t)?tt(tt({id:r},t),{},{type:"mgText"}):{type:"mgError",text:"No widget type specified: "+JSON.stringify(t,null,"\t")}}))}},widgetDefaults:!0,widgetTitles:!0,deblank:!0},r);t=n.clone?e().cloneDeep(t):t,n.deblank&&e().isEmpty(t)&&(t={type:"mgContainer",items:[]}),n.convertArray&&e().isArray(t)&&(t=n.convertArrayWrapper(t)),n.convertShorthand&&n.convertShorthandDetect(t)&&(t=n.convertShorthandTranslate(t));var o=[];return rt.flatten(t,{type:"spec",want:"array",wantDataPath:"$dataPath",wantSpecPath:"$specPath"}).forEach((function(t){t.type&&rt.widgets[t.type]?n.widgetDefaults&&Object.assign(t,e().chain(rt.widgets[t.type].config).pickBy((function(r,n){return!e().has(t,n)&&e().has(r,"default")})).mapValues((function(t){return t.default})).value()):(console.log("Unknown widget '".concat(t.type,"'"),t),t={type:"mgError",text:'Unknown widget type "'.concat(t.type,'": ')+JSON.stringify(t)}),t.show=null==t.show||!!t.show,t.showIf&&(t.showIf=rt.utils.evalCompile(t.showIf),o.push(t)),n.widgetTitles&&!t.title&&t.id&&(t.title=e().startCase(t.id))})),{spec:t,showIfs:o}},rt.$forms={},rt.utils={},rt.utils.global=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("unable to locate global object")}(),rt.utils.fetch=function(t,r){return Promise.resolve().then((function(){return rt.$http||Promise.reject("No Axios compatible HTTP library - set $macgyver.$http to the library reference")})).then((function(){if(e().isPlainObject(t)){var n=[t.url,t];t=n[0],r=n[1]}else r.url=t;if(!t)throw new Error("Unknown URL to fetch")})).then((function(){return{mappings:{},parsedUrl:new URL(t,window.location),settings:tt({type:"object",mappings:{},format:function(t,e){return t},formatError:function(e){return"Unable to format data feed from ".concat(t," - ").concat(e.toString())}},r)}})).then((function(t){return e().isEmpty(r.mappings)?Array.from(t.parsedUrl.searchParams.entries()).forEach((function(e){var r,n,o=(n=2,function(t){if(Array.isArray(t))return t}(r=e)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],u=!0,s=!1;try{for(r=r.call(t);!(u=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{u||null==r.return||r.return()}finally{if(s)throw o}}return i}}(r,n)||function(t,e){if(t){if("string"==typeof t)return Y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Y(t,e):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],u=o[1];i.startsWith("$")&&(t.mappings[i.substr(1)]={required:!1,from:u},t.parsedUrl.searchParams.delete(i))})):t.mappings=r.mappings,t})).then((function(t){return rt.$http.get(t.parsedUrl.toString()).then((function(e){return t.response=e})).then((function(){return t}))})).then((function(r){switch(r.settings.type){case"array":if(!e().isArray(r.response.data))throw'Expected an array from data feed "'.concat(t,'" but got a non-array');return e().isEmpty(r.mappings)?r.output=r.response.data:r.output=r.response.data.map((function(t,n){return e().mapValues(r.mappings,(function(e,r){if(e.required&&void 0===t[e.from])throw new Error("Required field ".concat(e.from," is not present in data feed for item #").concat(n+1));return t[e.from]}))})),r;case"object":if(!e().isPlainObject(r.response.data))throw'Expected object return from data feed "'.concat(t,'" but got a non-plain-object');return e().isEmpty(r.mappings)?r.output=r.response.data:r.output=e().mapValues(r.mappings,(function(t,e){if(t.required&&void 0===r.response.data[e])throw new Error("Required field ".concat(e," is not present in data feed for item #").concat(itemIndex+1));return r.response.data[t.from]})),r;case"raw":return r.output=r.response.data,r}})).then((function(t){try{return t.settings.format(t.output,t)}catch(r){throw e().isString(t.settings.formatError)?t.settings.formatError:t.settings.formatError(r)}})).catch((function(t){throw rt.notify.error(t),t})).finally((function(){return rt.notify.loading(t,!1)}))},rt.utils.evalCompile=function(t){var r,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e().isFunction(t)){if(!n)throw new Error("Cannot convert compiled Sift object back to an object - disable asFunc parameter");return t}if(e().isPlainObject(t))return n?B(t):t;if(e().isString(t)&&(r=H(/^\s*([\w\d\.]+)(\s*==?\s*|\s*!=\s*|\s*<=?\s*|\s*>=?\s*|\s+\$lte?\s+|\s+\$gte?\s+)(.+)\s*$/,{left:1,operand:2,right:3}).exec(t))){var o;if(r.groups.operand=r.groups.operand.trim(),isFinite(r.groups.right)?r.groups.right=+r.groups.right:/^(["']).*\1$/.test(r.groups.right)&&(r.groups.right=r.groups.right.substr(1,r.groups.right.length-2)),e().isString(r.groups.right)&&"true"===r.groups.right.toLowerCase()&&(r.groups.right=!0),e().isString(r.groups.right)&&"false"===r.groups.right.toLowerCase()&&(r.groups.right=!1),["=","==","$eq"].includes(r.groups.operand))o=et({},r.groups.left,r.groups.right);else{var i=["!=","$ne"].includes(r.groups.operand)?"$ne":[">","$gt"].includes(r.groups.operand)?"$gt":["<","$lt"].includes(r.groups.operand)?"$lt":[">=","$gte"].includes(r.groups.operand)?"$gte":["<=","$lte"].includes(r.groups.operand)?"$lte":function(){throw new Error('Unknown operand "'.concat(r.groups.operand,'" while parsing expression "').concat(t,'"'))}();o=et({},r.groups.left,et({},i,r.groups.right))}return n?B(o):o}throw new Error('Error parsinng expression "'.concat(t,'", $macgyver.utils.evalCompile() can only process simple expressions for now, use Sift object syntax for more complex tests'))},rt.utils.evalMatch=function(t,e){return 1==[e].filter(rt.utils.evalCompile(t)).length},rt.utils.setPath=function(t,r,n,o){if(e().isString(t)||e().isArray(t)||void 0===n){var i=[void 0,t,r,n];t=i[0],r=i[1],n=i[2],o=i[3]}else if(!e().isObject(t))throw new Error("Cannot use $setPath on non-object target");var u=tt({arrayNumeric:!0,debug:!1,removeUndefined:!0},o);u.debug&&console.debug("[$setPath]",r,"=",n,{target:t,options:o});var s=t;if(!r)throw new Error("Cannot $setPath with undefined path");return(e().isString(r)?r.split("."):r).some((function(t,e,r){if(e!=r.length-1)return void 0===s[t]?(r.slice(e,r.length-1).forEach((function(t){u.arrayNumeric&&isFinite(t)?rt.utils.set(s,t,[]):rt.utils.set(s,t,{}),s=s[t]})),rt.utils.set(s,r[r.length-1],n),!0):(s=s[t],!1);u.removeUndefined&&void 0===n?rt.utils.unset(s,t):rt.utils.set(s,t,n)})),n},rt.utils.set=rt.utils.global.Vue?Vue.set:function(t,e,r){return t[e]=r},rt.utils.unset=rt.utils.global.Vue?Vue.unset:function(t,e){delete t[e]},rt.utils.getPath=function(t,r,n){return e().get(t,r,n)},rt.utils.incrementId=function(t){if(t){if(/[0-9]$/.test(t)){var e=H(/^(.*)([0-9]+)$/,{prefix:1,numeric:2}).exec(t);return e.groups.prefix+(parseInt(e.groups.prefix)+1)}return t+"2"}return t};const nt=rt})(),o})()));